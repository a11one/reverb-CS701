{"ast":null,"code":"import _defineProperty from \"/Users/julia_athayde/Desktop/Senior_Year/Spring 2019/Senior Seminar/reverb-CS701/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/julia_athayde/Desktop/Senior_Year/Spring 2019/Senior Seminar/reverb-CS701/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/julia_athayde/Desktop/Senior_Year/Spring 2019/Senior Seminar/reverb-CS701/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/julia_athayde/Desktop/Senior_Year/Spring 2019/Senior Seminar/reverb-CS701/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/julia_athayde/Desktop/Senior_Year/Spring 2019/Senior Seminar/reverb-CS701/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/julia_athayde/Desktop/Senior_Year/Spring 2019/Senior Seminar/reverb-CS701/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/julia_athayde/Desktop/Senior_Year/Spring 2019/Senior Seminar/reverb-CS701/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/julia_athayde/Desktop/Senior_Year/Spring 2019/Senior Seminar/reverb-CS701/src/components/SignUp/index.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\nimport * as ROLES from '../../constants/roles';\nimport { Button, Container, Form, FormGroup, Input, Label } from 'reactstrap';\n\nvar SignUpPage = function SignUpPage() {\n  return React.createElement(SignUpForm, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  });\n};\n\nvar INITIAL_STATE = {\n  username: '',\n  email: '',\n  passwordOne: '',\n  passwordTwo: '',\n  isAdmin: false,\n  error: null\n};\nvar ERROR_CODE_ACCOUNT_EXISTS = 'auth/email-already-in-use';\nvar ERROR_MSG_ACCOUNT_EXISTS = \"\\n  An account with this E-Mail address already exists.\\n  Try to login with this account instead. If you think the\\n  account is already used from one of the social logins, try\\n  to sign in with one of them. Afterward, associate your accounts\\n  on your personal account page.\\n\";\n\nvar SignUpFormBase =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignUpFormBase, _Component);\n\n  function SignUpFormBase(props) {\n    var _this;\n\n    _classCallCheck(this, SignUpFormBase);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignUpFormBase).call(this, props));\n\n    _this.onSubmit = function (event) {\n      var _this$state = _this.state,\n          username = _this$state.username,\n          email = _this$state.email,\n          passwordOne = _this$state.passwordOne,\n          isAdmin = _this$state.isAdmin;\n      var roles = {};\n      console.log('Trying to create a new user');\n\n      if (isAdmin) {\n        roles[ROLES.ADMIN] = ROLES.ADMIN;\n      }\n\n      _this.props.firebase.doCreateUserWithEmailAndPassword(email, passwordOne).then(function (authUser) {\n        // Create a user in your Firebase realtime database\n        return _this.props.firebase.user(authUser.user.uid).set({\n          username: username,\n          email: email,\n          roles: roles\n        });\n      }).then(function () {\n        return _this.props.firebase.doSendEmailVerification();\n      }).then(function () {\n        _this.setState(_objectSpread({}, INITIAL_STATE));\n\n        _this.props.history.push(ROUTES.HOME);\n      }).catch(function (error) {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        _this.setState({\n          error: error\n        });\n      });\n\n      event.preventDefault();\n    };\n\n    _this.onChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.onChangeCheckbox = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.checked));\n    };\n\n    _this.state = _objectSpread({}, INITIAL_STATE);\n    return _this;\n  }\n\n  _createClass(SignUpFormBase, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          username = _this$state2.username,\n          email = _this$state2.email,\n          passwordOne = _this$state2.passwordOne,\n          passwordTwo = _this$state2.passwordTwo,\n          isAdmin = _this$state2.isAdmin,\n          error = _this$state2.error;\n      var isInvalid = passwordOne !== passwordTwo || passwordOne === '' || email === '' || username === '';\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Sing Up\"), React.createElement(Form, {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Input, {\n        name: \"username\",\n        value: username,\n        onChange: this.onChange,\n        type: \"text\",\n        placeholder: \"Full Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), React.createElement(Input, {\n        name: \"email\",\n        value: email,\n        onChange: this.onChange,\n        type: \"text\",\n        placeholder: \"Email Address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(Input, {\n        name: \"passwordOne\",\n        value: passwordOne,\n        onChange: this.onChange,\n        type: \"password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(Input, {\n        name: \"passwordTwo\",\n        value: passwordTwo,\n        onChange: this.onChange,\n        type: \"password\",\n        placeholder: \"Confirm Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(Button, {\n        disabled: isInvalid,\n        type: \"submit\",\n        color: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Sign Up\"), error && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, error.message)));\n    }\n  }]);\n\n  return SignUpFormBase;\n}(Component);\n\nvar SignUpLink = function SignUpLink() {\n  return React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, \"Don't have an account? \", React.createElement(Link, {\n    to: ROUTES.SIGN_UP,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, \"Sign Up\"));\n};\n\nvar SignUpForm = compose(withRouter, withFirebase)(SignUpFormBase);\nexport default SignUpPage;\nexport { SignUpForm, SignUpLink };","map":{"version":3,"sources":["/Users/julia_athayde/Desktop/Senior_Year/Spring 2019/Senior Seminar/reverb-CS701/src/components/SignUp/index.js"],"names":["React","Component","Link","withRouter","compose","withFirebase","ROUTES","ROLES","Button","Container","Form","FormGroup","Input","Label","SignUpPage","INITIAL_STATE","username","email","passwordOne","passwordTwo","isAdmin","error","ERROR_CODE_ACCOUNT_EXISTS","ERROR_MSG_ACCOUNT_EXISTS","SignUpFormBase","props","onSubmit","event","state","roles","console","log","ADMIN","firebase","doCreateUserWithEmailAndPassword","then","authUser","user","uid","set","doSendEmailVerification","setState","history","push","HOME","catch","code","message","preventDefault","onChange","target","name","value","onChangeCheckbox","checked","isInvalid","SignUpLink","SIGN_UP","SignUpForm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\n\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\nimport * as ROLES from '../../constants/roles';\n\nimport { Button, Container, Form, FormGroup, Input, Label } from 'reactstrap';\n\nconst SignUpPage = () => (\n    <SignUpForm />\n);\n\nconst INITIAL_STATE = {\n  username: '',\n  email: '',\n  passwordOne: '',\n  passwordTwo: '',\n  isAdmin: false,\n  error: null,\n};\n\nconst ERROR_CODE_ACCOUNT_EXISTS = 'auth/email-already-in-use';\n\nconst ERROR_MSG_ACCOUNT_EXISTS = `\n  An account with this E-Mail address already exists.\n  Try to login with this account instead. If you think the\n  account is already used from one of the social logins, try\n  to sign in with one of them. Afterward, associate your accounts\n  on your personal account page.\n`;\n\nclass SignUpFormBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { ...INITIAL_STATE };\n  }\n\n  onSubmit = event => {\n    const { username, email, passwordOne, isAdmin } = this.state;\n    const roles = {};\n    console.log('Trying to create a new user');\n\n    if (isAdmin) {\n      roles[ROLES.ADMIN] = ROLES.ADMIN;\n    }\n\n    this.props.firebase\n      .doCreateUserWithEmailAndPassword(email, passwordOne)\n      .then(authUser => {\n        // Create a user in your Firebase realtime database\n        return this.props.firebase.user(authUser.user.uid).set({\n          username,\n          email,\n          roles,\n        });\n      })\n      .then(() => {\n        return this.props.firebase.doSendEmailVerification();\n      })\n      .then(() => {\n        this.setState({ ...INITIAL_STATE });\n        this.props.history.push(ROUTES.HOME);\n      })\n      .catch(error => {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        this.setState({ error });\n      });\n\n    event.preventDefault();\n  };\n\n  onChange = event => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  onChangeCheckbox = event => {\n    this.setState({ [event.target.name]: event.target.checked });\n  };\n\n  render() {\n    const {\n      username,\n      email,\n      passwordOne,\n      passwordTwo,\n      isAdmin,\n      error,\n    } = this.state;\n\n    const isInvalid =\n      passwordOne !== passwordTwo ||\n      passwordOne === '' ||\n      email === '' ||\n      username === '';\n\n    return (\n\n      <Container>\n      <h1>Sing Up</h1>\n      <Form onSubmit={this.onSubmit}>\n        <Input\n          name=\"username\"\n          value={username}\n          onChange={this.onChange}\n          type=\"text\"\n          placeholder=\"Full Name\"\n        />\n        <Input\n          name=\"email\"\n          value={email}\n          onChange={this.onChange}\n          type=\"text\"\n          placeholder=\"Email Address\"\n        />\n        <Input\n          name=\"passwordOne\"\n          value={passwordOne}\n          onChange={this.onChange}\n          type=\"password\"\n          placeholder=\"Password\"\n        />\n        <Input\n          name=\"passwordTwo\"\n          value={passwordTwo}\n          onChange={this.onChange}\n          type=\"password\"\n          placeholder=\"Confirm Password\"\n        />\n        <Button disabled={isInvalid} type=\"submit\" color=\"warning\">\n          Sign Up\n        </Button>\n\n        {error && <p>{error.message}</p>}\n      </Form>\n\n      </Container>\n    );\n  }\n}\n\nconst SignUpLink = () => (\n  <p>\n    Don't have an account? <Link to={ROUTES.SIGN_UP}>Sign Up</Link>\n  </p>\n);\n\nconst SignUpForm = compose(\n  withRouter,\n  withFirebase,\n)(SignUpFormBase);\n\nexport default SignUpPage;\n\nexport { SignUpForm, SignUpLink };\n"]},"metadata":{},"sourceType":"module"}